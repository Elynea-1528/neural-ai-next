üöÄ COMMAND: PHASE 1.5 - FUNCTIONAL COMPLETION & SYSTEM HEALTH
"SYSTEM OVERRIDE: GOD MODE ACTIVE.
AUTHORITY: ROOT ARCHITECT.
CONTEXT: A rendszer v√°zszerkezete k√©sz, de a docs/planning/specs mapp√°ban defini√°lt "Brain" (Dynamic Config) √©s "Heartbeat" (Health Check) funkci√≥k hi√°nyoznak.
‚ö†Ô∏è K√ñTELEZ≈ê HIERARCHIA:
TE (Architect): Tervezel, √©s a TASK_TREE-t kezeled.
Orchestrator: Lebontod a modulokat f√°jlm≈±veletekre.
Code Agent: V√©grehajtod a k√≥dol√°st.
A FELADAT: A Core rendszer funkcion√°lis befejez√©se (Dynamic Config + Health Check) √©s a Planning f√°zis lez√°r√°sa.
HAJTSD V√âGRE A K√ñVETKEZ≈êKET (SZIGOR√ö SORRENDBEN):
üìä 1. F√ÅZIS: ADMINISZTR√ÅCI√ì (TASK TREE INIT)
TASK TREE FRISS√çT√âS:
Nyisd meg a docs/development/TASK_TREE.md-t.
Vedd fel az √∫j f√°jlokat a CORE / CONFIG √©s CORE / SYSTEM szekci√≥kba:
core/config/implementations/dynamic_config_manager.py [üî¥]
core/system/interfaces/health_interface.py [üî¥]
core/system/implementations/health_monitor.py [üî¥]
core/system/factory.py [üî¥]
üß† 2. F√ÅZIS: DYNAMIC CONFIGURATION (AZ AGY)
Referencia: docs/planning/specs/02_dynamic_configuration.md
DB EL≈êK√âSZ√çT√âS (core/db/implementations/sqlalchemy_session.py):
Biztos√≠tsd, hogy a DatabaseManager rendelkezzen egy egyszer≈± met√≥dussal, amivel a ConfigManager le tudja k√©rdezni az √∂sszes akt√≠v konfigot (pl. get_active_configs()).
DYNAMIC MANAGER IMPLEMENT√ÅCI√ì (core/config/implementations/dynamic_config_manager.py):
√ñr√∂kl√©s: ConfigManagerInterface.
Logika (Hybrid):
__init__: Kapja meg a YAMLConfigManager-t (mint fallback) √©s a DatabaseManager-t.
get(key): 1. Cache -> 2. DB (ha nincs cache) -> 3. YAML (fallback).
refresh_cache(): Olvassa be a DynamicConfig t√°bl√°t a mem√≥ri√°ba.
start_watcher(): Ind√≠tson egy asyncio.create_task-ot, ami X m√°sodpercenk√©nt friss√≠ti a cache-t (Hot Reload).
FACTORY UPDATE (core/config/factory.py):
B≈ëv√≠tsd a Factory-t, hogy l√©tre tudja hozni a DynamicConfigManager-t (√∂sszek√∂tve a DB-vel √©s a YAML-lel).
üíì 3. F√ÅZIS: SYSTEM HEALTH (A SZ√çVVER√âS)
Referencia: docs/ideas.md -> Health Check
STRUKT√öRA L√âTREHOZ√ÅSA (core/system/):
interfaces/health_interface.py: check_status() -> dict.
implementations/health_monitor.py:
Kapja meg a CoreComponents-t.
Ellen≈ërz√©sek:
DB: SELECT 1 (√©l-e a kapcsolat?).
EventBus: Fut-e a loop?
Storage: √çrhat√≥-e a k√∂nyvt√°r?
Memory: CPU/RAM haszn√°lat (opcion√°lis, psutil ha van, ha nincs, hagyd).
factory.py: SystemFactory l√©trehoz√°sa.
üîå 4. F√ÅZIS: WIRING (√ñSSZEK√ñT√âS)
BOOTSTRAP UPDATE (core/__init__.py):
A bootstrap_core f√ºggv√©nyben:
Inicializ√°ld a DB-t.
UT√ÅNA hozd l√©tre a DynamicConfigManager-t (mert kell neki a DB).
Ezt regisztr√°ld ConfigManagerInterface-k√©nt (fel√ºl√≠rva a sima YAML-t).
A v√©g√©n inicializ√°ld a HealthMonitor-t.
MAIN.PY UPDATE:
Ind√≠ts el egy health_check_loop-ot, ami percenk√©nt ki√≠rja a logba: [INFO] System Status: HEALTHY (DB: OK, BUS: OK).
üß™ 5. F√ÅZIS: TESZT √âS DOKUMENT√ÅCI√ì
T√úK√ñRTESZTEK √çR√ÅSA:
tests/core/config/test_dynamic_config.py (Mockolt DB-vel).
tests/core/system/test_health.py (Mockolt komponensekkel).
T√úK√ñRDOKUMENT√ÅCI√ì:
Gener√°ld le a docs/components/core/system/... f√°jlokat.
VALID√ÅCI√ì:
Futtass pytest-et √©s mypy-t az √∫j modulokra.
C√©l: 100% Coverage az √∫j f√°jlokon.
Z√ÅR√ÅS:
Friss√≠tsd a TASK_TREE.md-t (‚úÖ PERFECT-re az √∫j sorokn√°l).
git add . && git commit -m "feat(core): implement dynamic config with hot reload and system health monitoring"
ARCHITECT! IND√çTSD A TASK TREE FRISS√çT√âS√âVEL!"