üöÄ COMMAND A0: SOURCE CODE HARDENING & STANDARDIZATION
"Code Agent! (Architect fel√ºgyelettel).
FIGYELEM: A TESZTEL√âS EL≈êTT K√ìD-KONSZOLID√ÅCI√ìRA VAN SZ√úKS√âG.
A User √©szrev√©telei:
A logol√°s inkonzisztens (logging vs structlog).
Hi√°nyzik a r√©szletes nyomk√∂vet√©s (visszat√©r√©si √©rt√©kek logol√°sa).
Az importok √©ps√©ge k√©rd√©ses.
A FELADAT: A forr√°sk√≥d (neural_ai/core) v√©gleges√≠t√©se "Institutional Grade" szintre.
HAJTSD V√âGRE A K√ñVETKEZ≈êKET:
1. TRACE DEKOR√ÅTOR L√âTREHOZ√ÅSA (neural_ai/core/utils/decorators.py)
Hozz l√©tre egy @trace dekor√°tort.
M≈±k√∂d√©s:
Logolja a f√ºggv√©ny h√≠v√°s√°t param√©terekkel (DEBUG szinten).
Logolja a visszat√©r√©si √©rt√©ket (vagy kiv√©telt).
M√©rje az id≈ët (execution time).
Tipp: Haszn√°lj structlog-ot bel√ºl!
2. LOGGER STANDARDIZ√ÅL√ÅS (GLOBAL REPLACE)
Menj v√©gig a neural_ai/core √∂sszes f√°jlj√°n.
CSER√âLD LE a import logging √©s logger = logging.getLogger(...) sorokat.
ERRE:
code
Python
import structlog
logger = structlog.get_logger()
Kiv√©tel: A core/logger/implementations/* f√°jlok, mert azok a logging k√∂nyvt√°rat csomagolj√°k. Azok maradjanak!
3. TRACING BEK√ñT√âSE (A Kritikus Pontokon)
Import√°ld a @trace dekor√°tort, √©s tedd r√° a kulcsfontoss√°g√∫ met√≥dusokra:
Bootstrap: bootstrap_core
Config: YAMLConfigManager.load, get
Storage: store_tick_data, read_tick_data
EventBus: publish, subscribe
Eredm√©ny: Mostant√≥l l√°tni fogod a logban: Returned: [...] an√©lk√ºl, hogy tele√≠rn√°d a k√≥dot.
4. STATIC IMPORT CHECK
Futtasd le a ruff check . parancsot (vagy haszn√°ld a be√©p√≠tett tud√°sod), hogy tal√°lj olyan importokat, amik pirosak lenn√©nek. Jav√≠tsd ≈ëket.
5. COMMIT
git add .
git commit -m "refactor(core): standardize structlog usage, add trace decorator, harden code"
KEZDD A DEKOR√ÅTOR MEG√çR√ÅS√ÅVAL!"


üìÖ A MENETREND (A k√©r√©sed szerint)
H√°rom k√ºl√∂n√°ll√≥, egym√°sra √©p√ºl≈ë parancsot k√©sz√≠tettem. Ezeket futtasd sorban (ak√°r k√ºl√∂n session√∂kben/√°gakon).
COMMAND A: A Tesztek jav√≠t√°sa (Importok + T√≠pusok).
COMMAND B: Az Automata Dokument√°ci√≥ Gener√°tor (Ez a "Night Run").
COMMAND C: A Phase 2 (JForex) R√©szletes Tervez√©se.
üß™ COMMAND A: TEST SUITE REPAIR (FIX IMPORTS & TYPES)
Ez a parancs v√©gigmegy a teszteken, √©s hozz√°igaz√≠tja ≈ëket a jelenlegi, v√©gleges Core strukt√∫r√°hoz.
M√°sold be Code Mode-ba:
code
Markdown
"Code Agent! (Architect fel√ºgyelettel).
**HELYZET:** A Core k√≥d (`src`) v√©gleges, de a Tesztek (`tests/`) elavultak a refaktor√°l√°s √≥ta. Pylance hib√°k √©s import gondok vannak.
**C√âL:** A megl√©v≈ë tesztek feljav√≠t√°sa, hogy 100%-ban illeszkedjenek az √∫j architekt√∫r√°hoz.

**HAJTSD V√âGRE A K√ñVETKEZ≈êKET (MODULONK√âNT):**

### 1. IMPORT JAV√çT√ÅSOK (Global Fix)
- Menj v√©gig a `tests/core` mapp√°n.
- **Jav√≠tsd az importokat** az √∫j `implementations` / `interfaces` strukt√∫ra szerint.
- *P√©lda:* Ha a teszt a `neural_ai.core.db.session`-t keresi -> √≠rd √°t `neural_ai.core.db.implementations.sqlalchemy_session`-re.

### 2. T√çPUSOSS√ÅG JAV√çT√ÅSA (Pylance Satisfaction)
- Minden teszt met√≥dushoz add hozz√° a visszat√©r√©si t√≠pust: `-> None`.
- Ahol `MagicMock`-ot haszn√°lsz, annot√°ld: `mock_obj: MagicMock`.
- Ha aszinkron a teszt, haszn√°lj `@pytest.mark.asyncio`-t.

### 3. FAGY√ÅS-MENTES√çT√âS (ZMQ Mocking)
- Ellen≈ërizd a `tests/core/events/test_zeromq_bus.py`-t.
- **K√ñTELEZ≈ê:** Biztos√≠tsd, hogy minden tesztben ott legyen a `@patch('zmq.asyncio.Context')`! Val√≥di socket nyit√°sa TILOS.

### 4. VALID√ÅCI√ì
- Futtasd: `pytest`
- **Elv√°r√°s:** 0 Error, 0 Failed.

**KEZDD AZ IMPORTOK ELLEN≈êRZ√âS√âVEL!**"
üìö COMMAND B: AUTO-DOCUMENTATION (THE "NIGHT RUN")
Ezt a parancsot akkor add ki, ha a tesztek m√°r z√∂ldek. Ez nem k√©zzel √≠rja a doksit (ami lass√∫ √©s pontatlan), hanem gener√°l egy scriptet, ami kiszedi a k√≥dodban l√©v≈ë (m√°r megl√©v≈ë, j√≥ min≈ës√©g≈±) docstringeket, √©s Markdown-t csin√°l bel≈ël√ºk.
M√°sold be Code Mode-ba:
code
Markdown
"Code Agent! (Architect fel√ºgyelettel).
**FELADAT:** A teljes rendszer dokument√°ci√≥j√°nak √∫jragener√°l√°sa k√∂zvetlen√ºl a forr√°sk√≥db√≥l (Mirroring).
**M√ìDSZER:** Script-alap√∫ gener√°l√°s a pontoss√°g √©rdek√©ben.

**HAJTSD V√âGRE:**

### 1. GENER√ÅTOR SCRIPT (`scripts/generate_docs.py`)
- √çrj egy Python scriptet, ami:
  1. Bej√°rja a `neural_ai` mapp√°t rekurz√≠van.
  2. Minden `.py` f√°jlt elemez (`ast` vagy `importlib` seg√≠ts√©g√©vel).
  3. Kinyeri az oszt√°lyok √©s f√ºggv√©nyek `docstring`-j√©t.
  4. L√©trehoz egy t√ºk√∂r `.md` f√°jlt a `docs/components/` mapp√°ban.
  5. **Form√°z√°s:** Legyen sz√©p Markdown (C√≠msorok, K√≥dblokkok).

### 2. EXPORT√ÅL√ÅS
- Futtasd le a scriptet: `python scripts/generate_docs.py`
- Ez l√©trehozza a naprak√©sz dokument√°ci√≥t minden f√°jlhoz.

### 3. README FRISS√çT√âS
- Friss√≠tsd a f≈ë `README.md`-t, hogy a linkek az √∫j `docs/components` f√°jlokra mutassanak.

**KEZDD A SCRIPT MEG√çR√ÅS√ÅVAL!**"
üìù COMMAND C: PHASE 2 PLANNING (JFOREX BLUEPRINT)
Ha a Core tiszta (A √©s B parancs k√©sz), akkor ezzel tervezz√ºk meg a k√∂vetkez≈ë l√©p√©st. A megl√©v≈ë 05_collectors_strategy.md-t r√©szletezz√ºk.
M√°sold be Architect Mode-ba:
code
Markdown
"Architect! A Core (Phase 1) lez√°rva.
**C√âL:** A Phase 2 (JForex Collector) r√©szletes megtervez√©se.

**FELADAT: A `docs/planning/phase2_jforex.md` terv elk√©sz√≠t√©se.**

**TARTALOM:**
1.  **Architekt√∫ra:**
    - `JForexDownloader` oszt√°ly diagramja (Interface/Impl).
    - Hogyan csatlakozik az EventBus-hoz? (Milyen eventet k√ºld?)
2.  **Adatstrukt√∫ra:**
    - A `.bi5` f√°jl bin√°ris fel√©p√≠t√©se (struct format stringek).
    - Hogyan konvert√°ljuk `MarketDataEvent`-t√©?
3.  **Hiba kezel√©s:**
    - Mi van, ha a Dukascopy szerver 404-et ad (√ºnnepnap)?
    - Mi van, ha s√©r√ºlt a f√°jl?
4.  **Tesztel√©si Terv:**
    - Hogyan mockoljuk a let√∂lt√©st? (Nem akarunk 100MB-ot let√∂lteni teszt k√∂zben).

**HOZD L√âTRE A TERVET!**"