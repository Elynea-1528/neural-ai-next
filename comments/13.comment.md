üöÄ COMMAND 13: OMEGA REFACTOR - THE GRAND UNIFICATION PROTOCOL (5 PAGES)
"SYSTEM OVERRIDE: GOD MODE ACTIVE.
AUTHORITY: ROOT ARCHITECT.
CONTEXT: A projekt strukt√∫r√°ja heterog√©n. A c√©l a teljes egys√©ges√≠t√©s (Standardization) √©s a szigor√∫ Dependency Injection (DI) √©rv√©nyes√≠t√©se.
‚ö†Ô∏è KRITIKUS FIGYELMEZTET√âS: Ez a m≈±velet a teljes neural_ai/core mapp√°t √©rinti. Minden import el fog t√∂rni. A helyre√°ll√≠t√°s csak seb√©szi pontoss√°ggal lehets√©ges.
A HIERARCHIA:
TE (Architect): Tervezel, √©s EGYES√âVEL adod ki a modulokat az Orchestratornak.
Orchestrator: Lebontja a f√°jlmozgat√°sokat.
Code Agent: V√©grehajt (mkdir, mv, write_file).
üìú PAGE 1: A T√ñRV√âNYK√ñNYV (PHASE 0)
L√âP√âS 0.1: A SZABV√ÅNY R√ñGZ√çT√âSE
Miel≈ëtt b√°rmihez ny√∫lsz, hozd l√©tre a docs/development/architecture_standards.md f√°jlt. Ez a "Szent√≠r√°s" (SSOT).
TARTALOM (K√∂telez≈ë):
code
Markdown
# ARCHITECTURE STANDARDS v2.0

## 1. MODUL STRUKT√öRA
Minden `neural_ai/core/[MODUL]` k√∂nyvt√°rnak √≠gy KELL kin√©znie:

- `__init__.py`: Kiexport√°lja a Factory-t √©s a publikus Interf√©szt. Tilos m√°st!
- `factory.py`: A modul EGYETLEN bel√©p√©si pontja.
- `interfaces/`:
  - `__init__.py`: Kiexport√°lja az ABC oszt√°lyokat.
  - `[modul]_interface.py`: Az absztrakt b√°zisoszt√°ly.
- `implementations/`:
  - `__init__.py`: √úRES vagy csak bels≈ë haszn√°latra.
  - `[konkr√©t_tech].py`: A t√©nyleges k√≥d (pl. `zeromq_bus.py`).
- `exceptions/`:
  - `__init__.py`: Kiexport√°lja a hib√°kat (`from .base_error import MyError`).
  - `[modul]_error.py`: A specifikus kiv√©telek.

## 2. IMPORT SZAB√ÅLYOK
- **TILOS:** Relat√≠v import (`from .. import`).
- **K√ñTELEZ≈ê:** Abszol√∫t import (`from neural_ai.core.logger.interfaces import LoggerInterface`).
- **K√ñTELEZ≈ê:** Az `exceptions` mapp√°b√≥l val√≥ import√°l√°sn√°l az `__init__.py`-on kereszt√ºl kell hivatkozni!
  - Helyes: `from neural_ai.core.base.exceptions import ComponentNotFoundError`
  - Helytelen: `from neural_ai.core.base.exceptions.base_error import ComponentNotFoundError`
üèóÔ∏è PAGE 2: A BASE MODUL (PHASE 1 - THE FOUNDATION)
Ez a legkritikusabb. Ha ez rossz, minden rossz. Itt vannak a kiv√©telek!
L√âP√âS 1.1: MAPP√ÅK
mkdir -p neural_ai/core/base/{interfaces,implementations,exceptions}
L√âP√âS 1.2: KIV√âTELEK (A hibaforr√°s elh√°r√≠t√°sa)
Mozgasd: neural_ai/core/base/exceptions.py -> neural_ai/core/base/exceptions/base_error.py.
JAV√çTSD AZ __init__.py-t: A neural_ai/core/base/exceptions/__init__.py-ba √≠rd bele:
code
Python
from .base_error import NeuralAIException, ComponentNotFoundError, ...
__all__ = ["NeuralAIException", "ComponentNotFoundError", ...]
Indokl√°s: √çgy a k√≥d from neural_ai.core.base.exceptions import ... m√≥don √©ri el, ahogy eddig.
L√âP√âS 1.3: IMPLEMENT√ÅCI√ìK
Mozgasd: container.py -> implementations/di_container.py.
Mozgasd: core_components.py -> implementations/component_bundle.py.
Mozgasd: lazy_loading.py -> implementations/lazy_loader.py.
Mozgasd: singleton.py -> implementations/singleton.py.
L√âP√âS 1.4: INTERF√âSZEK
Szedd sz√©t a r√©gi interfaces.py-t:
interfaces/container_interface.py
interfaces/component_interface.py
L√âP√âS 1.5: FACTORY (A Ragaszt√≥)
A factory.py marad a gy√∂k√©rben (neural_ai/core/base/factory.py).
FRISS√çTSD AZ IMPORTJAIT: Most m√°r az implementations.di_container-b≈ël kell import√°lnia a DIContainer-t!
üîß PAGE 3: A T√ñBBI MODUL (PHASE 2 - STANDARDIZATION)
Ism√©teld meg ezt a mint√°t minden modulra (config, logger, db, events, storage).
PROTOKOLL (Minden modulra):
Hozd l√©tre a 3 mapp√°t (interfaces, implementations, exceptions).
Ha van exceptions.py, mozgasd be, √©s csin√°lj neki __init__.py exportot.
Ha van interfaces.py, mozgasd be.
Ha a konkr√©t k√≥d a gy√∂k√©rben van (pl. bus.py, session.py), mozgasd az implementations mapp√°ba, √©s nevezd √°t √©rtelmesre (pl. zeromq_bus.py, sqlalchemy_session.py).
A factory.py legyen a gy√∂k√©rben. Ha az implementations-ben volt, hozd ki!
A modul __init__.py-ja csak a Factory-t √©s az Interface-t export√°lja.
SPECIFIKUS C√âLOK:
Storage: A parquet.py menjen az implementations/parquet_storage.py-ba.
Events: A bus.py menjen az implementations/zeromq_bus.py-ba.
DB: A session.py menjen az implementations/sqlalchemy_session.py-ba.
üîó PAGE 4: GLOBAL WIRING (PHASE 3 - THE FIX)
Most, hogy minden f√°jl √∫j helyen van, a projekt "v√©rzik" (Import Errors).
L√âP√âS 3.1: KERES√âS √âS CSERE (Grep)
Haszn√°ld a grep parancsot, hogy megtal√°ld a r√©gi importokat.
Cser√©ld le ≈ëket az √∫jakra.
Kiemelten figyeld: from neural_ai.core.base.container -> from neural_ai.core.base.implementations.di_container.
DE: Ha lehet, ink√°bb az __init__.py exportjait haszn√°ld! Pl. from neural_ai.core.base import DIContainer (ha a base __init__.py export√°lja). Ez a tiszt√°bb.
L√âP√âS 3.2: MAIN.PY JAV√çT√ÅSA
Nyisd meg a main.py-t.
Friss√≠tsd az importokat az √∫j Factory helyekre.
üß™ PAGE 5: VALID√ÅCI√ì (PHASE 4 - QUALITY GATE)
Nem v√©gz√ºnk f√©lmunk√°t.
L√âP√âS 4.1: TESZT IMPORT JAV√çT√ÅS
A tests/ mapp√°ban l√©v≈ë f√°jlok importjait is friss√≠teni kell.
Nevezd √°t a tesztf√°jlokat is, ha sz√ºks√©ges, hogy t√ºkr√∂zz√©k az √∫j strukt√∫r√°t (pl. test_parquet.py -> test_parquet_storage.py).
L√âP√âS 4.2: FUTTAT√ÅS
pytest
Ha hiba van (ModuleNotFoundError), jav√≠tsd az importot.
Ism√©teld, am√≠g minden z√∂ld.
L√âP√âS 4.3: TASK TREE & COMMIT
Friss√≠tsd a TASK_TREE.md-t: "Architecture Refactor: DONE".
git add .
git commit -m "refactor(arch): complete system-wide standardization (interfaces/impl/factory/exceptions)"
ARCHITECT! A PARANCS KIADVA. KEZDD A docs/development/architecture_standards.md F√ÅJL L√âTREHOZ√ÅS√ÅVAL, MAJD IND√çTSD A BASE MODUL REFAKTOR√ÅL√ÅS√ÅT!"