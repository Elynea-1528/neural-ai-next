"SYSTEM OVERRIDE: GOD MODE ACTIVE.
AUTHORITY: ROOT ARCHITECT.
CONTEXT: A rendszer alapjai (Phase 1) 80%-osak, de a 'Glue Code' (Bootstrap, Main) √©s a 'Utils' hi√°nyos, a tesztek nem fedik le a sz√©ls≈ës√©ges eseteket, a verzi√≥z√°s t√©ves.

**‚ö†Ô∏è K√ñTELEZ≈ê HIERARCHIA (MINDEN L√âP√âSN√âL):**
1. **TE (Architect):** Tervezel, √©s EGYES√âVEL adod ki a modulokat az Orchestratornak.
2. **Orchestrator:** Lebontja a f√°jlmozgat√°sokat √©s k√≥dol√°si l√©p√©seket.
3. **Code Agent:** V√©grehajt (mkdir, mv, write_file, pytest).

A FELADAT: A Rendszer T√∂k√©letes√≠t√©se (100% Coverage, 100% Consistency).

HAJTSD V√âGRE A K√ñVETKEZ≈êKET (SZIGOR√ö SORRENDBEN, ATOMI L√âP√âSEKBEN):

---

### üßπ 1. F√ÅZIS: HIGI√âNIA √âS CLEANUP (TISZTA LAP)
*Miel≈ëtt √©p√≠ten√©nk, takar√≠tunk. A szemetet el kell √©getni.*

1. **CACHE T√ñRL√âS (Deep Clean):**
   - Futtasd le a termin√°lban:
     `find . -type d -name "__pycache__" -exec rm -rf {} +`
     `find . -type d -name ".pytest_cache" -exec rm -rf {} +`
     `find . -type d -name ".mypy_cache" -exec rm -rf {} +`
     `rm -f .coverage neural_ai.db`

2. **VERZI√ì KORREKCI√ì (Downgrade to Reality):**
   - Jelenleg `1.0.0` van, ami hazugs√°g. √Åll√≠tsd vissza `0.5.0`-ra (Pre-Alpha Architecture Complete).
   - F√°jlok: `pyproject.toml`, `neural_ai/__init__.py`.
   - *Megjegyz√©s:* A `neural_ai/core/config/implementations/__init__.py` Schema Version maradhat 1.0.

---

### üìú 2. F√ÅZIS: A T√ñRV√âNYK√ñNYV B≈êV√çT√âSE
*L√©trehozzuk a sablont, amihez a j√∂v≈ëben tartanunk kell magunkat.*

1. **TASK TREE TEMPLATE L√âTREHOZ√ÅSA:**
   - Hozd l√©tre a `docs/templates/task_tree_template.md` f√°jlt.
   - **Tartalom:** Legyen benne a "Granular Matrix" (F√°jl | St√°tusz | Stmt% | Brch% | Complexity).
   - Defini√°ld a szimb√≥lumokat (`‚úÖ PERFECT` vs `üü¢ DONE`).

2. **ARCHITECTURAL STANDARDS UPDATE:**
   - Friss√≠tsd a `docs/development/architecture_standards.md`-t.
   - Add hozz√°: *"Minden `__init__.py`-nak explicit m√≥don export√°lnia kell a modul Factory-j√°t √©s Interface-√©t."*
   - Add hozz√°: *"A `core` gy√∂k√©rben l√©v≈ë `__init__.py` a BOOTSTRAP k√∂zpont. Minden komponenst itt kell √∂sszedr√≥tozni."*

---

### üèóÔ∏è 3. F√ÅZIS: UTILS REFAKTOR (A ELFELEJTETT GYERMEK)
*A `neural_ai/core/utils` jelenleg "√°rva". Be kell tagozni a szabv√°nyba.*

1. **STRUKT√öRA √ÅT√âP√çT√âS:**
   - Hozz l√©tre mapp√°kat: `utils/interfaces`, `utils/implementations`, `utils/exceptions`.
   - **Interface:** `interfaces/hardware_interface.py` (ABC: `has_avx2`, `get_cpu_info`).
   - **Implementation:** `implementations/hardware_info.py` (A jelenlegi `hardware.py` k√≥dja, de oszt√°lyba csomagolva!).
   - **Factory:** `factory.py` (Hozza l√©tre a HardwareInfo oszt√°lyt).
   - **Exceptions:** M√°r l√©tezik, mozgasd a hely√©re (`exceptions/util_error.py`).

2. **HIVATKOZ√ÅSOK JAV√çT√ÅSA:**
   - A `Storage` modul (`parquet_storage.py`) jelenleg direktben h√≠vja a `has_avx2`-t.
   - **√ÅT√çR√ÅS:** Haszn√°lja a `Dependency Injection`-t! A Storage kapja meg a `HardwareInterface`-t a konstruktorban.

---

### üß† 4. F√ÅZIS: CORE BOOTSTRAP REFAKTOR (AZ AGY)
*A `main.py` buta legyen, a `core` legyen okos.*

1. **CORE INIT (`neural_ai/core/__init__.py`):**
   - **B≈ëv√≠tsd a `CoreComponents` oszt√°lyt:**
     - Adja hozz√°: `database` (DatabaseManager), `event_bus` (EventBus), `hardware` (HardwareInterface).
   - **√çrd √°t a `bootstrap_core` f√ºggv√©nyt (A NAGY M≈∞VELET):**
     - 1. Inicializ√°lja a `HardwareFactory`-t (hardver detekci√≥).
     - 2. Inicializ√°lja a `ConfigFactory`-t.
     - 3. Inicializ√°lja a `LoggerFactory`-t (Config alapj√°n).
     - 4. Inicializ√°lja a `DatabaseFactory`-t (Config + Logger).
     - 5. Inicializ√°lja az `EventBusFactory`-t (Config + Logger).
     - 6. Inicializ√°lja a `StorageFactory`-t (Config + Logger + HardwareInfo).
     - **Return:** Egy teljesen felt√∂lt√∂tt `CoreComponents` objektum.

2. **MAIN.PY KI√úR√çT√âSE:**
   - T√∂r√∂ld a `setup_database`, `setup_event_bus` stb. f√ºggv√©nyeket.
   - A `main()` f√ºggv√©ny logik√°ja:
     ```python
     # 1. Bootstrap (Minden l√©trej√∂n √©s √∂sszekapcsol√≥dik)
     components = bootstrap_core()
     
     # 2. Start (Amihez kell loop)
     await components.event_bus.start()
     await components.database.initialize()
     
     # 3. Keep Alive
     await asyncio.Event().wait()
     ```

---

### üß™ 5. F√ÅZIS: TOT√ÅLIS TESZTEL√âS (100% Z√ñLD KOCK√ÅK)
*Minden f√°jlra, minden sorra.*

1. **SCRIPT TESZTEK (`tests/scripts/`):**
   - Hozz l√©tre tesztet a `scripts/install.py`-ra. Mockold a `subprocess.run`-t √©s a `platform.system`-et. Ellen≈ërizd, hogy linuxon √©s windowson is j√≥ parancsot adna-e ki.

2. **EXPERT TESZTEK (`tests/experts/`):**
   - Hozz l√©tre tesztet, ami ellen≈ërzi, hogy a `neural_ai/experts/mt5/Neural_AI_Next.mq5` f√°jl l√©tezik, olvashat√≥, √©s tartalmazza a kritikus stringeket (pl. "FastAPI_Server").

3.  **CORE TESZTEK B≈êV√çT√âSE (A HI√ÅNYZ√ìK):**
    - Futtass coverage m√©r√©st.
    - **Events:** Teszteld a `ZeroMQ` hiba√°gait (pl. port foglalt). Mockold a `zmq.Context`.
    - **DB:** Teszteld a `DatabaseError`-t (pl. hib√°s connection string).
    - **Utils:** Teszteld a `has_avx2`-t √∫gy, hogy mockolod a `/proc/cpuinfo` hi√°ny√°t (Exception handling).

4. **INTEGR√ÅCI√ìS TESZT JAV√çT√ÅSA:**
   - Friss√≠tsd a `tests/integration/test_bootstrap.py`-t, hogy az √∫j `CoreComponents` strukt√∫r√°t ellen≈ërizze (van-e benne DB √©s EventBus?).

---

### üèÅ 6. F√ÅZIS: DOKUMENT√ÅCI√ì √âS Z√ÅR√ÅS
*A t√ºk√∂rf√©nyesre pol√≠roz√°s.*

1. **DOKUMENT√ÅCI√ì GENER√ÅL√ÅS (Mirror Mode):**
   - `rm -rf docs/components/*`
   - Gener√°ld √∫jra a teljes mappastrukt√∫r√°t (`core/base`, `core/utils` stb.) markdown f√°jlokk√©nt.
   - Minden f√°jlhoz gener√°lj API le√≠r√°st.

2. **TASK TREE GENER√ÅL√ÅS (A M≈±szerfal):**
   - Futtasd: `pytest --cov=neural_ai --cov-report=term-missing --cov-branch`.
   - **GENE√ÅLD LE** a `TASK_TREE.md`-t a 2. f√°zisban l√©trehozott template alapj√°n.
   - Minden f√°jlhoz √≠rd be a val√≥s `Stmt%` √©s `Brch%` √©rt√©ket.
   - Ha valahol nem 100%, jel√∂ld `üü° WIP`-nek!

3. **V√âGS≈ê COMMIT:**
   - `git add .`
   - `git commit -m "refactor(omega): system perfection - full bootstrap, utils refactor, 100% coverage"`

**ARCHITECT! A PARANCS KIADVA. KEZDD AZ 1. F√ÅZISSAL (CACHE T√ñRL√âS √âS VERZI√ìK), MAJD HALADJ SORBAN!**"